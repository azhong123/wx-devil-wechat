<!--pages/product/product.wxml-->
<import src="../tpls/quantity/quantity-tpl.wxml" />

<view class='container'>
  <!--商品轮播图  -->
  <swiper indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" duration="{{duration}}" class="detail-swiper">
    <block wx:for="{{goods.mainImgUrls}}" wx:key="goods.goodsId">
      <swiper-item class="detail-swiper-item">
        <image mode="aspectFill" src="{{item}}" class="item-image" data-src="{{item}}" bindtap="previewImage"></image>
      </swiper-item>
    </block>
  </swiper>
  <scroll-view scroll-y="true">
    <!--商品标题和价格  -->
    <view class='product-detail'>
      <view class='price'>￥{{goods.goodsPrice}}</view>
      <view class='title'>{{goods.goodsName}}</view>
    </view>
    <view class="separate-fine"></view>
    <!--商品数量和规格  -->
    <view class='product-attribute'>
      <view bindtap="toggleDialog" class='attribute-item'>
        <view class='name'>规格</view>
        <view class='detail'>选择商品规格,购买数量</view>
      </view>

    </view>
    <view class="separate-thick"></view>

    <!--商品评价  -->
    <view class='product-comment'>
      <view class='comment-title'>宝贝评价(200)</view>
      <view class='comment-content'>用力开发中~~~~~~~~~~</view>
    </view>
    <view class="separate-thick"></view>

    <!--商品详情图片和规格  -->
    <view class="detail-bottom-box">
      <view class="tabs-box">
        <block wx:for="{{['商品详情','产品参数','售后保障']}}" wx:key="{{currentTabsIndex}}">
          <view class="tabs-item {{currentTabsIndex == index ? 'selected' : ''}}" bindtap="onTabsItemTap" data-index="{{index}}">
            {{item}}
          </view>
        </block>
      </view>

      <view class="product-detail-box">
        <view hidden="{{currentTabsIndex!=0}}">
          <block wx:for="{{goods.detailImg}}" wx:key="{{index}}">
            <view class="product-detail-imgs">
              <image mode="aspectFill" src="{{item.goodsUrl}}"></image>
            </view>
          </block>
        </view>
        <view class="product-detail-properties" hidden="{{currentTabsIndex!=1}}">
          <block wx:for="{{goods.paramItems}}" wx:key="index">
            <view class="properties-item">
              <view class="properties-name">{{item.paramName}}</view>
              <view class="properties-detail">{{item.paramValue}}</view>
            </view>
          </block>
        </view>
        <view class="product-detail-protect" hidden="{{currentTabsIndex!=2}}">
          <view>七天无理由退货款</view>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 底部悬浮栏 -->
  <view class="detail-nav">
    <view class="nav-toCar">
      <image bindtap="toCar" src="../../imgs/icon/cart1.png" />
      <view class="nav-name">购物车</view>
    </view>
    <view class="nav-like">
      <image bindtap="addLike" src="../../imgs/icon/enshrine.png" />
      <view class="nav-name">收藏</view>
    </view>
    <view class="nav-but">
      <button class="button-add-cart" bindtap="toggleDialog" formType="submit">加入购物车</button>
      <button class="button-buy-now" bindtap="buyNow" formType="submit">立即购买</button>
    </view>

  </view>

  <!--加入购物车  -->

  <view class="dialog {{ showDialog ? 'dialog--show' : '' }}">
    <view class="dialog__mask" bindtap="toggleDialog" />
    <view class="dialog__container">
      <view class="row">
        <image bindtap='closeDialog' class='image-close' src='../../imgs/icon/close.png'></image>
        <image class="image-sku" src="{{goods.goodsMinImg}}"></image>
        <view class="column">
          <text class="sku-price">￥{{goods.totalMoney}}</text>
          <text class="sku-title">{{goods.goodsName}}</text>
        </view>
      </view>
      <view class="border-line"></view>
      <!--购买数量  -->
      <view class="row">
        <view class="buy-quantity">数量</view>
        <view class="quantity-position">
          <template is="quantity" data="{{...goods,index:1}}" />

        </view>
      </view>
      <view class="border-line"></view>
      <view class="check-button">
        <button class="check-button-add-cart" bindtap="addToCart" formType="submit">加入购物车</button>
        <button class="check-button-buy-now" bindtap="buyNow" formType="submit">立即购买</button>
      </view>

    </view>
  </view>
</view>